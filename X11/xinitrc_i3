# Source X config if it exists
xrdb $XDG_CONFIG_HOME/X11/Xresources

WM=/usr/bin/i3

# Custom Layout :D
setxkbmap -layout Systech13
redshift &!
dunst -config $XDG_CONFIG_HOME/dunst/dunstrc &!
while true
do
	# Work around stupidity of java
	unset _JAVA_AWT_WM_NONREPARENTING

	case "$WM" in
	        *fvwm*|*xmonad*|i3)
	                export _JAVA_AWT_WM_NONREPARENTING=1
	                ;;
	esac

	# Launch window manager. This script is written so that when the window manager
	# stops the session will end interactively.
	$WM

	# Ask if we realy want to close the session or restart a window manager
	which zenity >/dev/null 2>&1 || break
	zenity --question --text="The window manager exited, do you want to close the X session?" && break
	new_wm="$(zenity --entry --text="Window manager to start:" --entry-text="$WM")"
	[ -n "$new_wm" ] && WM="$new_wm"
	unset new_wm
done



