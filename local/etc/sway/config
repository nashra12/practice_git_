set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $lockcmd swaylock -f -c 00000050

# Session idling management
exec swayidle -w idlehint 300 \
  timeout 300   "$lockcmd" \
  timeout 600   'swaymsg "output * dpms off"' \
  resume        'swaymsg "output * dpms on"' \
  before-sleep  "$lockcmd" \
  lock          "$lockcmd"
  # No unlock until I can get a pidlock...

input * tap enabled
input * xkb_layout "us"
input * xkb_variant "intl"
input * xkb_options "caps:escape"

# Key bindings
## Session
bindsym $mod+F4 kill
bindsym $mod+Shift+c reload
bindsym $mod+mod1+Control+Shift+F4 exec swaymsg exit

## Apps
bindsym $mod+Return exec alacritty -e tmux
bindsym $mod+Shift+Return exec alacritty
bindsym $mod+Control+Return exec dmenu_path | dmenu | xargs swaymsg exec --

# Layout management
bindsym $mod+Shift+a focus parent
bindsym $mod+w splitv  # "Vertically"
bindsym $mod+e splith

bindsym $mod+a layout stacking
bindsym $mod+s layout tabbed
bindsym $mod+d layout toggle split
bindsym $mod+f fullscreen

bindsym $mod+Shift+g floating toggle
floating_modifier $mod normal
bindsym $mod+space focus mode_toggle  ## Switch between stack and floating

## Move focus
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

## Move focused
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

### Workspaces
bindsym $mod+Escape exec swaymsg -t get_workspaces |\
  jq 'map(.num)|.[]' | dmenu | \
  xargs swaymsg exec workspace --
bindsym $mod+Shift+Escape exec swaymsg -t get_workspaces |\
  jq 'map(.num)|.[]' | dmenu | \
  xargs swaymsg exec move container to workspace --

# Switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9

# Scratchpad
bindsym $mod+minus scratchpad show
bindsym $mod+Shift+minus move scratchpad  # I don't think I'll ever use this...
bindsym $mod+Shift+q exec alacritty -t Scratchpad-flyway -e tmux new -As flyway
bindsym $mod+q exec tmux detach-client -s flyway

# Containers
mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# No loghook :(

# Bar
bar {
    position top
    status_command while date +'%Y-%m-%d %l:%M:%S %p'; do sleep 1; done
    colors {
        statusline #ffffff80
        background #22222280
        inactive_workspace #32323200 #32323200 #5c5c5c80
    }
}
